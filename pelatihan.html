<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pelatihan - BantuKerja</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <a href="dashboard.html">BantuKerja</a>
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="profile.html" id="logoutBtn" class="btn-logout">
                        <i class="fas fa-user"></i> Profile
                    </a></li>
                    <li><a href="login.html" id="logoutBtn" class="btn-logout">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a></li>                 
                </ul>
            </nav>
        </div>
    </header>

    <!-- Dashboard Content -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="pelatihan.html" class="active"><i class="fas fa-book"></i> Pelatihan</a></li>
                    <li><a href="lowongan.html"><i class="fas fa-briefcase"></i> Lowongan Kerja</a></li>
                    <li><a href="riwayat.html"><i class="fas fa-history"></i> Riwayat</a></li>
                    <li><a href="notifications.html"><i class="fas fa-bell"></i> Notifikasi</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="page-header">
                <h1>Daftar Pelatihan</h1>
                <p>Temukan dan daftar pelatihan yang sesuai dengan kebutuhan Anda</p>
            </div>

            <div class="search-container">
                <div class="search-input">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchTraining" placeholder="Cari pelatihan...">
                </div>
            </div>

            <div class="training-grid" id="trainingGrid">
                <!-- Training cards will be loaded here via JavaScript -->
            </div>

            <div id="noResults" class="no-results hidden">
                <h3>Tidak ada pelatihan yang ditemukan</h3>
                <p>Coba cari dengan kata kunci lain</p>
            </div>
        </main>
    </div>

    <!-- Modal for Training Registration -->
    <div id="trainingModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Daftar Pelatihan</h2>
            <p id="modalTrainingName">Anda akan mendaftar untuk pelatihan <span></span></p>
            <form id="trainingRegistrationForm">
                <div class="form-group">
                    <label for="notes">Catatan (opsional)</label>
                    <input type="text" id="notes" placeholder="Tambahkan catatan jika diperlukan">
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-outline" id="cancelRegistration">Batal</button>
                    <button type="submit" class="btn btn-primary">Konfirmasi Pendaftaran</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 KerjaAja. Hak Cipta Dilindungi.</p>
            </div>
        </div>
    </footer>

    <script src="js/data.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const trainingGrid = document.getElementById('trainingGrid');
            const searchInput = document.getElementById('searchTraining');
            const noResults = document.getElementById('noResults');
            const modal = document.getElementById('trainingModal');
            const modalTrainingName = document.getElementById('modalTrainingName').querySelector('span');
            const closeModal = document.querySelector('.close-modal');
            const cancelBtn = document.getElementById('cancelRegistration');
            const registrationForm = document.getElementById('trainingRegistrationForm');
            
            let selectedTrainingId = null;
            
            // Display all trainings initially
            displayTrainings(mockTrainings);
            
            // Search functionality
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const filteredTrainings = mockTrainings.filter(training => 
                    training.name.toLowerCase().includes(searchTerm) || 
                    training.description.toLowerCase().includes(searchTerm)
                );
                
                displayTrainings(filteredTrainings);
            });
            
            // Function to display trainings
            function displayTrainings(trainings) {
                trainingGrid.innerHTML = '';
                
                if (trainings.length === 0) {
                    noResults.classList.remove('hidden');
                } else {
                    noResults.classList.add('hidden');
                    
                    trainings.forEach(training => {
                        const trainingCard = document.createElement('div');
                        trainingCard.className = 'training-card';
                        trainingCard.innerHTML = `
                            <div class="training-image">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <div class="training-content">
                                <h3>${training.name}</h3>
                                <div class="training-details">
                                    <p><i class="fas fa-calendar"></i> ${training.date}</p>
                                    <p><i class="fas fa-map-marker-alt"></i> ${training.location}</p>
                                    <p><i class="fas fa-users"></i> Kuota: ${training.quota} orang</p>
                                </div>
                                <p class="training-description">${training.description.substring(0, 100)}...</p>
                                <button class="btn btn-primary btn-block register-btn" data-id="${training.id}">Daftar</button>
                            </div>
                        `;
                        trainingGrid.appendChild(trainingCard);
                    });
                    
                    // Add event listeners to register buttons
                    document.querySelectorAll('.register-btn').forEach(button => {
                        button.addEventListener('click', function() {
                            selectedTrainingId = this.getAttribute('data-id');
                            const training = mockTrainings.find(t => t.id == selectedTrainingId);
                            modalTrainingName.textContent = training.name;
                            modal.style.display = 'block';
                        });
                    });
                }
            }
            
            // Close modal when clicking the X
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking cancel
            cancelBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Handle form submission
            registrationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Show success message (in a real app, this would send data to a server)
                alert('Pendaftaran berhasil! Anda telah terdaftar untuk pelatihan ini.');
                modal.style.display = 'none';
            });
        });
    </script>
</body>
</html>