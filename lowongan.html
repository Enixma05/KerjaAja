<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lowongan Kerja - BantuKerja</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <a href="dashboard.html">BantuKerja</a>
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="profile.html" id="logoutBtn" class="btn-logout">
                        <i class="fas fa-user"></i> Profile
                    </a></li>
                    <li><a href="login.html" id="logoutBtn" class="btn-logout">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a></li>                 
                </ul>
            </nav>
        </div>
    </header>

    <!-- Dashboard Content -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="pelatihan.html"><i class="fas fa-book"></i> Pelatihan</a></li>
                    <li><a href="lowongan.html" class="active"><i class="fas fa-briefcase"></i> Lowongan Kerja</a></li>
                    <li><a href="riwayat.html"><i class="fas fa-history"></i> Riwayat</a></li>
                    <li><a href="notifications.html"><i class="fas fa-bell"></i> Notifikasi</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="page-header">
                <h1>Daftar Lowongan Kerja</h1>
                <p>Temukan dan lamar pekerjaan yang sesuai dengan keahlian Anda</p>
            </div>

            <div class="search-container">
                <div class="search-input">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchJob" placeholder="Cari lowongan kerja...">
                </div>
            </div>

            <div class="job-grid" id="jobGrid">
                <!-- Job cards will be loaded here via JavaScript -->
            </div>

            <div id="noResults" class="no-results hidden">
                <h3>Tidak ada lowongan yang ditemukan</h3>
                <p>Coba cari dengan kata kunci lain</p>
            </div>
        </main>
    </div>

    <!-- Modal for Job Application -->
    <div id="jobModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Lamar Pekerjaan</h2>
            <p id="modalJobInfo">Anda akan melamar untuk posisi <span class="job-title"></span> di <span class="job-company"></span></p>
            <form id="jobApplicationForm">
                <div class="form-group">
                    <label for="cv">Unggah CV (PDF)</label>
                    <div class="file-input">
                        <button type="button" class="btn btn-outline" id="fileSelectBtn">
                            <i class="fas fa-upload"></i> <span id="fileName">Pilih file</span>
                        </button>
                        <input type="file" id="cv" accept=".pdf" style="display: none;">
                    </div>
                </div>
                <div class="form-group">
                    <label for="coverLetter">Surat Lamaran (opsional)</label>
                    <textarea id="coverLetter" placeholder="Tambahkan surat lamaran jika diperlukan"></textarea>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-outline" id="cancelApplication">Batal</button>
                    <button type="submit" class="btn btn-primary">Kirim Lamaran</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 KerjaAja. Hak Cipta Dilindungi.</p>
            </div>
        </div>
    </footer>

    <script src="js/data.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const jobGrid = document.getElementById('jobGrid');
            const searchInput = document.getElementById('searchJob');
            const noResults = document.getElementById('noResults');
            const modal = document.getElementById('jobModal');
            const modalJobTitle = document.querySelector('.job-title');
            const modalJobCompany = document.querySelector('.job-company');
            const closeModal = document.querySelector('.close-modal');
            const cancelBtn = document.getElementById('cancelApplication');
            const applicationForm = document.getElementById('jobApplicationForm');
            const fileInput = document.getElementById('cv');
            const fileSelectBtn = document.getElementById('fileSelectBtn');
            const fileName = document.getElementById('fileName');
            
            let selectedJobId = null;
            
            // Display all jobs initially
            displayJobs(mockJobs);
            
            // Search functionality
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const filteredJobs = mockJobs.filter(job => 
                    job.title.toLowerCase().includes(searchTerm) || 
                    job.company.toLowerCase().includes(searchTerm) ||
                    job.description.toLowerCase().includes(searchTerm)
                );
                
                displayJobs(filteredJobs);
            });
            
            // Function to display jobs
            function displayJobs(jobs) {
                jobGrid.innerHTML = '';
                
                if (jobs.length === 0) {
                    noResults.classList.remove('hidden');
                } else {
                    noResults.classList.add('hidden');
                    
                    jobs.forEach(job => {
                        const jobCard = document.createElement('div');
                        jobCard.className = 'job-card';
                        jobCard.innerHTML = `
                            <div class="job-header">
                                <div>
                                    <h3>${job.title}</h3>
                                    <p class="job-company"><i class="fas fa-building"></i> ${job.company}</p>
                                </div>
                                <span class="badge">${job.type}</span>
                            </div>
                            <div class="job-details">
                                <p><i class="fas fa-map-marker-alt"></i> ${job.location}</p>
                                <p><i class="fas fa-calendar"></i> Deadline: ${job.deadline}</p>
                            </div>
                            <p class="job-description">${job.description.substring(0, 100)}...</p>
                            <button class="btn btn-primary btn-block apply-btn" data-id="${job.id}">Lamar</button>
                        `;
                        jobGrid.appendChild(jobCard);
                    });
                    
                    // Add event listeners to apply buttons
                    document.querySelectorAll('.apply-btn').forEach(button => {
                        button.addEventListener('click', function() {
                            selectedJobId = this.getAttribute('data-id');
                            const job = mockJobs.find(j => j.id == selectedJobId);
                            modalJobTitle.textContent = job.title;
                            modalJobCompany.textContent = job.company;
                            modal.style.display = 'block';
                        });
                    });
                }
            }
            
            // File input handling
            fileSelectBtn.addEventListener('click', function() {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    fileName.textContent = this.files[0].name;
                }
            });
            
            // Close modal when clicking the X
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking cancel
            cancelBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Handle form submission
            applicationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!fileInput.files || !fileInput.files[0]) {
                    alert('Silakan unggah CV Anda terlebih dahulu.');
                    return;
                }
                
                // Show success message (in a real app, this would send data to a server)
                alert('Lamaran berhasil dikirim! Anda akan dihubungi jika lamaran Anda diterima.');
                modal.style.display = 'none';
            });
        });
    </script>
</body>
</html>