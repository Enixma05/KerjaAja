<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Pendaftar - KerjaAja</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/notifications.css">
    <link rel="stylesheet" href="css/admin-notifications.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <a href="admin-dashboard.html">KerjaAja Admin</a>
            </div>
            <nav class="nav">
                <ul>
                    <!-- Admin Notifications -->
                    <li class="notification-dropdown">
                        <div class="notification-menu" id="adminNotificationMenu">
                            <div class="notification-header">
                                <h4>Notifikasi Admin</h4>
                                <button class="mark-all-read" id="adminMarkAllRead">
                                    <i class="fas fa-check-double"></i>
                                    Tandai Semua Dibaca
                                </button>
                            </div>
                            <div class="notification-list" id="adminNotificationList">
                                <!-- Admin notifications will be populated by JavaScript -->
                            </div>
                            <div class="notification-footer">
                                <a href="admin-notifications.html" id="viewAllAdminNotifications">Lihat Semua Notifikasi</a>
                            </div>
                        </div>
                    </li>
                    <!-- Send Notification Button -->
                    <li>
                        <button class="btn btn-primary" id="sendNotificationBtn">
                            <i class="fas fa-paper-plane"></i> Kirim Notifikasi
                        </button>
                    </li>
                    <li><a href="#" id="logoutBtn" class="btn-logout">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Notification Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Send Notification Modal -->
    <div id="sendNotificationModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeSendModal">&times;</span>
            <h2>Kirim Notifikasi</h2>
            <p>Kirim notifikasi ke pengguna platform</p>
            
            <form id="sendNotificationForm">
                <div class="form-group">
                    <label for="notificationType">Jenis Notifikasi</label>
                    <select id="notificationType" required>
                        <option value="">Pilih Jenis</option>
                        <option value="info">Informasi</option>
                        <option value="success">Berhasil</option>
                        <option value="warning">Peringatan</option>
                        <option value="error">Error</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="notificationTarget">Target Penerima</label>
                    <select id="notificationTarget" required>
                        <option value="">Pilih Target</option>
                        <option value="all">Semua Pengguna</option>
                        <option value="active">Pengguna Aktif</option>
                        <option value="training">Peserta Pelatihan</option>
                        <option value="job_seekers">Pencari Kerja</option>
                        <option value="specific">Pengguna Tertentu</option>
                    </select>
                </div>

                <div class="form-group" id="specificUsersGroup" style="display: none;">
                    <label for="specificUsers">Email Pengguna (pisahkan dengan koma)</label>
                    <textarea id="specificUsers" rows="3" placeholder="user1@email.com, user2@email.com"></textarea>
                </div>

                <div class="form-group">
                    <label for="notificationTitle">Judul Notifikasi</label>
                    <input type="text" id="notificationTitle" required placeholder="Masukkan judul notifikasi">
                </div>

                <div class="form-group">
                    <label for="notificationMessage">Pesan</label>
                    <textarea id="notificationMessage" rows="4" required placeholder="Masukkan pesan notifikasi"></textarea>
                </div>

                <div class="form-group">
                    <label for="notificationAction">Action URL (opsional)</label>
                    <input type="url" id="notificationAction" placeholder="https://example.com">
                </div>

                <div class="form-group">
                    <label for="scheduleNotification">
                        <input type="checkbox" id="scheduleNotification"> Jadwalkan Notifikasi
                    </label>
                </div>

                <div class="form-group" id="scheduleGroup" style="display: none;">
                    <label for="scheduleDateTime">Tanggal & Waktu</label>
                    <input type="datetime-local" id="scheduleDateTime">
                </div>

                <div class="modal-buttons">
                    <button type="button" id="cancelSendNotification" class="btn btn-outline">Batal</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Kirim Notifikasi
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Dashboard Content -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="admin-dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="admin-pelatihan.html"><i class="fas fa-book"></i> Pelatihan</a></li>
                    <li><a href="admin-lowongan.html"><i class="fas fa-briefcase"></i> Lowongan Kerja</a></li>
                    <li><a href="admin-pendaftar.html" class="active"><i class="fas fa-users"></i> Data Pendaftar</a></li>
                    <li><a href="admin-notifications.html"><i class="fas fa-bell"></i> Kelola Notifikasi</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="page-header">
                <h1>Data Pendaftar</h1>
                <p>Kelola data pendaftar pelatihan dan pelamar kerja</p>
            </div>

            <div class="tabs">
                <div class="tab-header">
                    <button class="tab-btn active" data-tab="pelatihan">Pendaftar Pelatihan</button>
                    <button class="tab-btn" data-tab="lowongan">Pelamar Kerja</button>
                </div>
                <div class="tab-content-profile">
                    <div class="tab-pane active" id="pelatihanTab">
                        <div class="search-container">
                            <div class="search-input">
                                <i class="fas fa-search"></i>
                                <input type="text" id="searchTrainingApplicant" placeholder="Cari pendaftar...">
                            </div>
                        </div>
                        <div class="data-table-container">
                            <table class="data-table" id="trainingApplicantTable">
                                <thead>
                                    <tr>
                                        <th>Nama</th>
                                        <th>Pelatihan</th>
                                        <th>Tanggal Daftar</th>
                                        <th>Status</th>
                                        <th class="text-right">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Training applicant data will be loaded here via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane" id="lowonganTab">
                        <div class="search-container">
                            <div class="search-input">
                                <i class="fas fa-search"></i>
                                <input type="text" id="searchJobApplicant" placeholder="Cari pelamar...">
                            </div>
                        </div>
                        <div class="data-table-container">
                            <table class="data-table" id="jobApplicantTable">
                                <thead>
                                    <tr>
                                        <th>Nama</th>
                                        <th>Posisi</th>
                                        <th>Perusahaan</th>
                                        <th>Tanggal Lamar</th>
                                        <th>CV</th>
                                        <th>Status</th>
                                        <th class="text-right">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Job applicant data will be loaded here via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 KerjaAja. Hak Cipta Dilindungi.</p>
            </div>
        </div>
    </footer>

    <script src="js/data.js"></script>
    <script src="js/main.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/admin-notifications.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabPanes = document.querySelectorAll('.tab-pane');
            const trainingApplicantTable = document.getElementById('trainingApplicantTable').querySelector('tbody');
            const jobApplicantTable = document.getElementById('jobApplicantTable').querySelector('tbody');
            const searchTrainingApplicant = document.getElementById('searchTrainingApplicant');
            const searchJobApplicant = document.getElementById('searchJobApplicant');
            
            // Tab functionality
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    // Remove active class from all buttons and panes
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabPanes.forEach(p => p.classList.remove('active'));
                    
                    // Add active class to current button and pane
                    this.classList.add('active');
                    document.getElementById(tabName + 'Tab').classList.add('active');
                });
            });
            
            // Display training applicants
            displayTrainingApplicants(mockTrainingApplicants);
            
            // Display job applicants
            displayJobApplicants(mockJobApplicants);
            
            // Search training applicants
            searchTrainingApplicant.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const filteredApplicants = mockTrainingApplicants.filter(applicant => 
                    applicant.name.toLowerCase().includes(searchTerm) || 
                    applicant.training.toLowerCase().includes(searchTerm)
                );
                
                displayTrainingApplicants(filteredApplicants);
            });
            
            // Search job applicants
            searchJobApplicant.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const filteredApplicants = mockJobApplicants.filter(applicant => 
                    applicant.name.toLowerCase().includes(searchTerm) || 
                    applicant.position.toLowerCase().includes(searchTerm) ||
                    applicant.company.toLowerCase().includes(searchTerm)
                );
                
                displayJobApplicants(filteredApplicants);
            });
            
            // Function to display training applicants
            function displayTrainingApplicants(applicants) {
                trainingApplicantTable.innerHTML = '';
                
                if (applicants.length === 0) {
                    const emptyRow = document.createElement('tr');
                    emptyRow.innerHTML = `
                        <td colspan="5" class="text-center">Tidak ada pendaftar yang ditemukan</td>
                    `;
                    trainingApplicantTable.appendChild(emptyRow);
                } else {
                    applicants.forEach(applicant => {
                        const row = document.createElement('tr');
                        
                        let statusClass = '';
                        let statusText = '';
                        
                        switch (applicant.status) {
                            case 'pending':
                                statusClass = 'status-pending';
                                statusText = 'Menunggu';
                                break;
                            case 'accepted':
                                statusClass = 'status-accepted';
                                statusText = 'Diterima';
                                break;
                            case 'rejected':
                                statusClass = 'status-rejected';
                                statusText = 'Ditolak';
                                break;
                            case 'completed':
                                statusClass = 'status-completed';
                                statusText = 'Selesai';
                                break;
                        }
                        
                        row.innerHTML = `
                            <td>${applicant.name}</td>
                            <td>${applicant.training}</td>
                            <td>${applicant.date}</td>
                            <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                            <td class="text-right">
                                <div class="action-buttons">
                                    ${applicant.status === 'pending' ? `
                                        <button class="btn btn-sm btn-success accept-training-btn" data-id="${applicant.id}">
                                            <i class="fas fa-check"></i> Terima
                                        </button>
                                        <button class="btn btn-sm btn-danger reject-training-btn" data-id="${applicant.id}">
                                            <i class="fas fa-times"></i> Tolak
                                        </button>
                                    ` : ''}
                                    ${applicant.status === 'accepted' ? `
                                        <button class="btn btn-sm btn-outline complete-training-btn" data-id="${applicant.id}">
                                            Tandai Selesai
                                        </button>
                                    ` : ''}
                                </div>
                            </td>
                        `;
                        
                        trainingApplicantTable.appendChild(row);
                    });
                    
                    // Add event listeners to action buttons
                    document.querySelectorAll('.accept-training-btn').forEach(button => {
                        button.addEventListener('click', function() {
                            const applicantId = this.getAttribute('data-id');
                            // In a real app, this would send data to a server
                            alert('Pendaftar berhasil diterima untuk mengikuti pelatihan!');
                        });
                    });
                    
                    document.querySelectorAll('.reject-training-btn').forEach(button => {
                        button.addEventListener('click', function() {
                            const applicantId = this.getAttribute('data-id');
                            // In a real app, this would send data to a server
                            alert('Pendaftar telah ditolak untuk mengikuti pelatihan!');
                        });
                    });
                    
                    document.querySelectorAll('.complete-training-btn').forEach(button => {
                        button.addEventListener('click', function() {
                            const applicantId = this.getAttribute('data-id');
                            // In a real app, this would send data to a server
                            alert('Peserta telah menyelesaikan pelatihan!');
                        });
                    });
                }
            }
            
            // Function to display job applicants
            function displayJobApplicants(applicants) {
                jobApplicantTable.innerHTML = '';
                
                if (applicants.length === 0) {
                    const emptyRow = document.createElement('tr');
                    emptyRow.innerHTML = `
                        <td colspan="7" class="text-center">Tidak ada pelamar yang ditemukan</td>
                    `;
                    jobApplicantTable.appendChild(emptyRow);
                } else {
                    applicants.forEach(applicant => {
                        const row = document.createElement('tr');
                        
                        let statusClass = '';
                        let statusText = '';
                        
                        switch (applicant.status) {
                            case 'pending':
                                statusClass = 'status-pending';
                                statusText = 'Menunggu';
                                break;
                            case 'accepted':
                                statusClass = 'status-accepted';
                                statusText = 'Diterima';
                                break;
                            case 'rejected':
                                statusClass = 'status-rejected';
                                statusText = 'Ditolak';
                                break;
                        }
                        
                        row.innerHTML = `
                            <td>${applicant.name}</td>
                            <td>${applicant.position}</td>
                            <td>${applicant.company}</td>
                            <td>${applicant.date}</td>
                            <td><a href="#" class="link">${applicant.cv}</a></td>
                            <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                            <td class="text-right">
                                <div class="action-buttons">
                                    ${applicant.status === 'pending' ? `
                                        <button class="btn btn-sm btn-success accept-job-btn" data-id="${applicant.id}">
                                            <i class="fas fa-check"></i> Terima
                                        </button>
                                        <button class="btn btn-sm btn-danger reject-job-btn" data-id="${applicant.id}">
                                            <i class="fas fa-times"></i> Tolak
                                        </button>
                                    ` : ''}
                                </div>
                            </td>
                        `;
                        
                        jobApplicantTable.appendChild(row);
                    });
                    
                    // Add event listeners to action buttons
                    document.querySelectorAll('.accept-job-btn').forEach(button => {
                        button.addEventListener('click', function() {
                            const applicantId = this.getAttribute('data-id');
                            // In a real app, this would send data to a server
                            alert('Pelamar berhasil diterima untuk posisi yang dilamar!');
                        });
                    });
                    
                    document.querySelectorAll('.reject-job-btn').forEach(button => {
                        button.addEventListener('click', function() {
                            const applicantId = this.getAttribute('data-id');
                            // In a real app, this would send data to a server
                            alert('Pelamar telah ditolak untuk posisi yang dilamar!');
                        });
                    });
                }
            }
            
            // Setup logout button
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'login.html';
            });
        });
    </script>
</body>
</html>